<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Practicalli: Pin Emacs packages to manage issues</title>
    <link rel="canonical" href="http://practical.li/blog-staging/posts/pin-emacs-package-to-manage-issues/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu|Ubuntu+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/default.min.css">
    <link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/practicalli/graphic-design/live/logos/practicalli-logo-bullet.png">
    <link href="/blog-staging/css/screen.css" rel="stylesheet" type="text/css" />
</head>
<body>


<nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/blog-staging/">
              <img src="https://raw.githubusercontent.com/practicalli/graphic-design/live/logos/practicalli-logo-name-white.svg" alt="Practicalli logo" />
            </a>
        </div>

        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li ><a href="/blog-staging/">Home</a></li>
                <li
                ><a href="/blog-staging/archives/">Archives</a></li>
                
                <li
                >
                <a href="/blog-staging/pages/about/">About</a>
                </li>
                
                <li><a href="/blog-staging/feed.xml">RSS</a></li>
                <li><a href="https://github.com/practicalli/blog-content/projects/1">Feedback</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div><!--/.container-fluid -->
</nav>


<div class="container">


    <div class="row">
        <div class="col-lg-9">
            <div id="content">
                
<div id="post">
    <div class="post-header">
    <div id="post-meta" class="row">
        <div class="col-lg-6">August 15, 2023</div>
        
    </div>
    <h2>Pin Emacs packages to manage issues</h2>

    <!-- conditional topic logo displayed if :topic has value in a post -->
    
    <img class="topic" src="https://raw.githubusercontent.com/practicalli/graphic-design/live/topic-images/spacemacs-logo-name.png" alt="spacemacs logo - post topic" />
    
</div>
<div>
    
    <p>Emacs provides a huge amount of features via packages. Community configurations like Spacmacs orchestrate packages so they work seemlessly together.  It is rare, but sometimes a package will have a breaking issue.</p><p><a href="https://melpa.org/#/">Melpa</a> provides (5,544) up-to-date packages  automatically built from each projects Git repository. Builds are defined by a recipe for each package.</p><p>A custom recipe can be used to control which version of a package is used with the Emacs configuration, to work around issues or changes to a package.</p><!-- more --><h2 id="melpa-recipes">Melpa recipes</h2><p>Search for packages on the Melpa website and view its recipe to understand how it is built.</p><pre><code class="elisp">(treemacs
 :fetcher github
 :repo "Alexander-Miller/treemacs"
 :files (:defaults
         "Changelog.org"
         "icons"
         "src/elisp/treemacs*.el"
         "src/scripts/treemacs*.py"
         (:exclude "src/extra/*")))
</code></pre><p>Melpa will build the package from the lastest commit.</p><p><code>:commit</code> with a specific Git SHA value can be used to specify a different commit, especially useful for using an earlier package known to be issue free.</p><blockquote><p>Visit the shared Git repository of the package and review the commit history to find a likely working package.</p></blockquote><h2 id="custom-recipe-in-spacemacs">Custom recipe in Spacemacs</h2><p>Spacemacs uses packages from Melpa so the latest package versions are downloaded when Spacemacs is installed.</p><p>Users of Spacemacs can decide when to update packages by manually running a package update, <code>SPC f e U</code>, usually when a new feature in a package is desirable.</p><p>If there is an issue with updated package, then run a package rollback via the link on the Spacemacs home buffer, <code>SPC b h</code>.</p><p>If the majority of package updates are required, then a specific package version can be pinned by providing a custom recipe.</p><p>Add a custom recipe to the Spacemacs user configuration, to the <code>dotspacemacs-additional-packages</code>.</p><p>Move the newest package version from the <code>elpa/&lt;emacs-version&gt;/develop/</code> directory to trigger a package download when Emacs is restarted.</p><h3 id="example-package-pin">Example package pin</h3><pre><code class="elisp">   dotspacemacs-additional-packages
   '((treemacs
      :location (recipe
                 :fetcher github
                 :repo "Alexander-Miller/treemacs"
                 :commit "2c576bebccd56ec8e65f4ec5ed5de864d9684fbf"
                 :files (:defaults
                         "Changelog.org"
                         "icons"
                         "src/elisp/treemacs*.el"
                         "src/scripts/treemacs*.py"
                         (:exclude "src/extra/*")))))
</code></pre><blockquote><p>Practicalli recommends Spacemacs packages should be updated only when there is a known new feature or bug fix available.</p><p>Avoid updating packages when your time is constrained, so there is scope to resolve a potential error.</p></blockquote><h2 id="copy-package-from-rollback-cache">Copy package from rollback cache</h2><p>Spacemacs saves a short history of package files in the <code>.cache/.rollback/&lt;emacs-version&gt;/develop/&lt;rollback-date&gt;</code></p><p>Rather than use a custom recipe or revert all updated packages, a specific package can be copied from the rollback cache, removing the newer package.</p><p>For example:</p><pre><code class="shell">cp -r ~/.config/emacs/.cache/.rollback/28.3/develop/23-08-10_07.35.07/treemacs-20230703.1929/ ~/.config/emacs/elpa/28.3/develop/
</code></pre><h2 id="summary">Summary</h2><p>Issues with Emacs packages are quite rare from experience and often solved very quickly.</p><p>A Package rollback in Spacemacs is a very quick way to resolve an issue.  Pinning a package using a custom recipe a little more involved, although still a relatively quick approach if the error messages identify a troubled package.</p><p>The Spacemacs community is very large so issues are reported quickly.  Even if the issue is not obvious then collectively the issue is solved quite rapidly.</p><p>Thank you</p><p><a href="https://github.com/practicalli">practicalli GitHub profile</a> I <a href="https://twitter.com/practcial_li">@practical_li</a></p>
</div>

<div id="post-tags">
    <b>Tags: </b>
    
    <a href="/blog-staging/tags/emacs/">emacs</a>
    
    <a href="/blog-staging/tags/spacemacs/">spacemacs</a>
    
</div>


    <div id="prev-next">
        
        <a href="/blog-staging/posts/running-clojure-code-with-java-and-jvm-options/">&laquo; Java JVM Options for running Clojure</a>
        
        
        <a class="right" href="/blog-staging/posts/access-aws-with-clojure-from-scratch/">Accessing AWS with Clojure from scratch - simple approach &raquo;</a>
        
    </div>

    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_config = function () {
            this.page.url = "http://practical.li/blog-staging/posts/pin-emacs-package-to-manage-issues/";
            this.page.identifier = "Pin Emacs packages to manage issues";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//practicalli-blog.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    


</div>

            </div>
        </div>

        <div class="col-md-3">
            <div id="sidebar">
                <h3>Links</h3>
                <ul id="links">
                    <li><a href="http://practical.li/">Practicalli Home</a></li>
                    <li><a href="http://youtube.com/practicalli">YouTube channel</a></li>
                    <li><a href="https://github.com/practicalli/blog-content/projects/1">Feeback / Issues</a></li>
                    
                    <li><a href="/blog-staging/pages/contributing/">Contributing</a></li>
                    
                </ul>
                
                <div id="recent">
                    <h3>Recent Posts</h3>
                    <ul>
                        
                        <li><a href="/blog-staging/posts/running-clojure-code-with-java-and-jvm-options/">Java JVM Options for running Clojure</a></li>
                        
                        <li><a href="/blog-staging/posts/pin-emacs-package-to-manage-issues/">Pin Emacs packages to manage issues</a></li>
                        
                        <li><a href="/blog-staging/posts/access-aws-with-clojure-from-scratch/">Accessing AWS with Clojure from scratch - simple approach</a></li>
                        
                        <li><a href="/blog-staging/posts/docker-a-simple-workflow-for-clojure/">Docker: a simple workflow for Clojure</a></li>
                        
                        <li><a href="/blog-staging/posts/docker-desktop-on-ubuntu-linux/">Docker Desktop on Ubuntu Linux</a></li>
                        
                        <li><a href="/blog-staging/posts/docker-compose-for-clojure-development/">Docker Compose for Clojure Development</a></li>
                        
                        <li><a href="/blog-staging/posts/practicalli-plans-2023/">Practicalli future plans</a></li>
                        
                        <li><a href="/blog-staging/posts/create-deps-new-template-for-clojure-cli-projects/">Create deps-new templates for Clojure CLI projects</a></li>
                        
                        <li><a href="/blog-staging/posts/build-emacs-from-source-on-ubuntu-linux/">Build Emacs from source on Ubuntu Linux</a></li>
                        
                    </ul>
                </div>
                
                
                <div id="tags">
                    <h3>Tags</h3>
                    <ul>
                        
                        <li><a href="/blog-staging/tags/json/">json</a></li>
                        
                        <li><a href="/blog-staging/tags/ring/">ring</a></li>
                        
                        <li><a href="/blog-staging/tags/very%20fetch/">very fetch</a></li>
                        
                        <li><a href="/blog-staging/tags/ubuntu/">ubuntu</a></li>
                        
                        <li><a href="/blog-staging/tags/lsp/">lsp</a></li>
                        
                        <li><a href="/blog-staging/tags/cryogen/">cryogen</a></li>
                        
                        <li><a href="/blog-staging/tags/practicalli/">practicalli</a></li>
                        
                        <li><a href="/blog-staging/tags/makefile/">makefile</a></li>
                        
                        <li><a href="/blog-staging/tags/neovim/">neovim</a></li>
                        
                        <li><a href="/blog-staging/tags/aliases/">aliases</a></li>
                        
                        <li><a href="/blog-staging/tags/challenges/">challenges</a></li>
                        
                        <li><a href="/blog-staging/tags/github/">github</a></li>
                        
                        <li><a href="/blog-staging/tags/jdk_java_options/">jdk_java_options</a></li>
                        
                        <li><a href="/blog-staging/tags/clojure/">clojure</a></li>
                        
                        <li><a href="/blog-staging/tags/httpkit/">httpkit</a></li>
                        
                        <li><a href="/blog-staging/tags/aws/">aws</a></li>
                        
                        <li><a href="/blog-staging/tags/webapps/">webapps</a></li>
                        
                        <li><a href="/blog-staging/tags/clojure-cli/">clojure-cli</a></li>
                        
                        <li><a href="/blog-staging/tags/pull-requests/">pull-requests</a></li>
                        
                        <li><a href="/blog-staging/tags/editors/">editors</a></li>
                        
                        <li><a href="/blog-staging/tags/java/">java</a></li>
                        
                        <li><a href="/blog-staging/tags/tools-deps/">tools-deps</a></li>
                        
                        <li><a href="/blog-staging/tags/hardware/">hardware</a></li>
                        
                        <li><a href="/blog-staging/tags/make/">make</a></li>
                        
                        <li><a href="/blog-staging/tags/cider/">cider</a></li>
                        
                        <li><a href="/blog-staging/tags/emacs/">emacs</a></li>
                        
                        <li><a href="/blog-staging/tags/clj-http/">clj-http</a></li>
                        
                        <li><a href="/blog-staging/tags/calva/">calva</a></li>
                        
                        <li><a href="/blog-staging/tags/snippets/">snippets</a></li>
                        
                        <li><a href="/blog-staging/tags/clojure-lsp/">clojure-lsp</a></li>
                        
                        <li><a href="/blog-staging/tags/thinkpad/">thinkpad</a></li>
                        
                        <li><a href="/blog-staging/tags/events/">events</a></li>
                        
                        <li><a href="/blog-staging/tags/community/">community</a></li>
                        
                        <li><a href="/blog-staging/tags/advent-of-parens/">advent-of-parens</a></li>
                        
                        <li><a href="/blog-staging/tags/spacemacs/">spacemacs</a></li>
                        
                        <li><a href="/blog-staging/tags/docker/">docker</a></li>
                        
                        <li><a href="/blog-staging/tags/cognitect-labs/">cognitect-labs</a></li>
                        
                        <li><a href="/blog-staging/tags/help/">help</a></li>
                        
                        <li><a href="/blog-staging/tags/transducers/">transducers</a></li>
                        
                        <li><a href="/blog-staging/tags/lenovo/">lenovo</a></li>
                        
                        <li><a href="/blog-staging/tags/reduce/">reduce</a></li>
                        
                        <li><a href="/blog-staging/tags/compojure/">compojure</a></li>
                        
                        <li><a href="/blog-staging/tags/klipse/">klipse</a></li>
                        
                        <li><a href="/blog-staging/tags/figwheel-main/">figwheel-main</a></li>
                        
                        <li><a href="/blog-staging/tags/clojure-core/">clojure-core</a></li>
                        
                        <li><a href="/blog-staging/tags/web-scraper/">web-scraper</a></li>
                        
                        <li><a href="/blog-staging/tags/blogging/">blogging</a></li>
                        
                        <li><a href="/blog-staging/tags/conjure/">conjure</a></li>
                        
                        <li><a href="/blog-staging/tags/github-actions/">github-actions</a></li>
                        
                        <li><a href="/blog-staging/tags/apis/">apis</a></li>
                        
                        <li><a href="/blog-staging/tags/jvm/">jvm</a></li>
                        
                        <li><a href="/blog-staging/tags/static-sites/">static-sites</a></li>
                        
                        <li><a href="/blog-staging/tags/re-clojure/">re-clojure</a></li>
                        
                        <li><a href="/blog-staging/tags/packages/">packages</a></li>
                        
                    </ul>
                </div>
                
            </div>
        </div>
    </div>
    <footer>
      Copyright &copy; 2023 Practicalli
      <p style="text-align: center;">Powered by <a href="http://cryogenweb.org">Cryogen</a></p>

      <license id="license">
        <div>
          <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution 4.0 ShareAlike License</a>, including custom images & stylesheets.</p>
          <p>Permissions beyond the scope of this license may be available by contacting <a xmlns:cc="http://creativecommons.org/ns#" href="https://twitter.com/practical_li" rel="cc:morePermissions">@practical_li</a></p>
          <br>
          <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>
        </div>
      </license>

    </footer>
</div>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="/blog-staging/js/highlight.pack.js" type="application/javascript"></script>
<script>hljs.initHighlightingOnLoad();</script>


</body>
</html>
