<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Practicalli: Desirable features of a Clojure Editor</title>
    <link rel="canonical" href="http://practical.li/blog-staging/posts/desirable-features-for-a-clojure-editor/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu|Ubuntu+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/default.min.css">
    <link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/practicalli/graphic-design/live/logos/practicalli-logo-bullet.png">
    <link href="/blog-staging/css/screen.css" rel="stylesheet" type="text/css" />
</head>
<body>


<nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/blog-staging/">
              <img src="https://raw.githubusercontent.com/practicalli/graphic-design/live/logos/practicalli-logo-name-white.svg" alt="Practicalli logo" />
            </a>
        </div>

        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li ><a href="/blog-staging/">Home</a></li>
                <li
                ><a href="/blog-staging/archives/">Archives</a></li>
                
                <li
                >
                <a href="/blog-staging/pages/about/">About</a>
                </li>
                
                <li><a href="/blog-staging/feed.xml">RSS</a></li>
                <li><a href="https://github.com/practicalli/blog-content/projects/1">Feedback</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div><!--/.container-fluid -->
</nav>


<div class="container">


    <div class="row">
        <div class="col-lg-9">
            <div id="content">
                
<div id="post">
    <div class="post-header">
    <div id="post-meta" class="row">
        <div class="col-lg-6">September 19, 2023</div>
        
    </div>
    <h2>Desirable features of a Clojure Editor</h2>

    <!-- conditional topic logo displayed if :topic has value in a post -->
    
    <img class="topic" src="https://raw.githubusercontent.com/practicalli/graphic-design/live/topic-images/clojure-logo-name.png" alt="clojure logo - post topic" />
    
</div>
<div>
    
    <p>Clojure development benefits from great tooling, typically focused around an editor (or IDE).  There are a number of great editors to choose from that support Clojure.</p><p>Practicalli uses many features of a Clojure aware editor with a bias towards highly effective interaction with the REPL, user actions driven exclusively via the keyboard and an uncluttered user interface.</p><p>Practicalli Clojure provides <a href="https://practicalli/clojure/clojure-editors/">an overview of Clojure editors</a> and the plugins that provide Clojure support, e.g. Emacs, Neovim, VS Code, Pulsar and Sublime.</p><p>Emacs (Spacemacs or Doom) &amp; CIDER provides all the desirably functionality alone, although Portal provides additional views to further support inspecting data.</p><p>Neovim &amp; Conjure or VSpaceCode &amp; Calva provide the desirably functionality too, although require Portal and other tools for some functionality.</p><!-- more --><h2 id="repl-connnection">REPL connnection</h2><p>Interaction with the REPL is the foundation of all Clojure development, so connecting the Editor to the REPL process is a fundamental feature</p><ul><li>connect to an existing REPL process via nREPL (optionally socket repl - maybe prepl in future)</li><li>start a new REPL process (Clojure CLI, Leiningen)</li></ul><blockquote><p>Starting the REPL process outside of the editor provides a useful separation of editor and REPL, also allows for a range of editors and other tooling to share the REPL state</p></blockquote><p>Practicalli typically starts the REPL process in a terminal, specifying Clojure CLI aliases to configure paths and dependencies to load libraries and toos to support development.</p><p>Practicalli uses a terminal UI REPL prompt for longer running processes, e.g. starting components such as web servers.</p><h2 id="customise-repl-starup">Customise REPL starup</h2><p>Clojure development workflows and tools may vary across projects, so customising the REPL starup is highly valuable.</p><ul><li>use of Clojure CLI aliases from project and user level deps.edn to support different configurations and tools when starting the REPL process</li></ul><p>The <code>user</code> namespace is always loaded during REPL startup, allowing tools and libraries to be included via the <code>user.clj</code> file when on the class path.</p><p>The <code>:dev/env</code> and <code>:repl/reloaded</code> aliases from <a href="https://practical.li/clojure/clojure-cli/practicalli-config/">Practicalli Clojure CLI Config</a> add the <code>dev</code> directory to the class path, loading a custom <code>user</code> namespace defined in <code>dev/user.clj</code>.</p><p>A custom <code>user</code> namespace supports the <a href="https://practical.li/clojure/clojure-cli/repl-reloaded/">Practicalli REPL Reloaded workflow</a>, launching Portal data inspector listening to all evaluation results and Mulog Tap Publisher sending log events to Portal.</p><blockquote><p>Calva jack-in requires a JSON mapping to use Clojure CLI user aliases, so Practicalli recommends starting the REPL process in a terminal with the desired aliases and using Calva connect</p></blockquote><h2 id="evaluate-clojure">Evaluate Clojure</h2><p>Practicalli evaluates expressions as they are written, providing qualative feedback on the expected behaviour</p><p>Evaluate expressions in Source code window, with results inline or sent to a data inspector (Portal, Cider Inspector)</p><ul><li>evaluate a namespace to load all expressions the current namespace and required namespaces, except expressions in <code>comment</code> form or <code>#_</code></li><li>evaluate a top-level expression or nested expression (e.g. eval last s-expression)</li><li>option to eval expression within <code>(comment ...)</code> and after <code>#_</code></li></ul><p>Evaluation to investigate the behaviour of the code</p><ul><li>pretty print the evaluation result or sent to an inspector, i.e. to navigate more interesting data structures</li><li>print evaluation as a comment, preferably with a pretty print option, to demonstrate aspects of a function or support software archaeology</li><li>replace expression with result of evaluation to better understand that part of the code</li><li>macro-expand expression to see what code the macro produces</li></ul><p>Cleaning up the REPL state</p><ul><li>Un-evaluate a var to avoid running stale code and tests, e.g. remove def, defn, deftest names from the REPL process</li></ul><h2 id="maintain-repl-state">Maintain REPL State</h2><p>A Clojure REPL can be very long lived thanks to the stability of the Java Virtual Machine (JVM).  Removing state vars can help avoid a REPL restart, as tools that refresh namespaces and start/stop/restart a Clojure system components.</p><ul><li>refresh changed namespaces of the project in the REPL process, optionally with hook to restart components</li></ul><p>For simpler applications, Practicalli loads <code>clojure.tools.namespace.repl</code> at REPL starup via a custom <code>user</code> namespace to <code>refresh</code> stale namespaces in the project and <code>set-refresh-dirs</code> to define the directory paths that should be checked for changes (excluding <code>dev</code> from the path to avoid reloading tools).</p><p>For web services and clojure projects composed of system components, the <a href="https://practical.li/clojure-web-services/service-repl-workflow/">Practicalli Service REPL workflow</a> is used. The Service REPL workflow uses either <a href="https://practical.li/clojure-web-services/service-repl-workflow/donut-system/">donut-party/system</a> or <a href="https://practical.li/clojure-web-services/service-repl-workflow/integrant/">Integrant &amp; Integrant REPL</a> to manage restarting of component and also reloading changed namespaces into the REPL state.</p><h2 id="inspecting--navigating-data">Inspecting / Navigating Data</h2><p>Many results of evaluating Clojure produce interesting and potentially complex data structures.  Tools for navigating data aid in the understanding of results produced by Clojure code.</p><p>Being able to present the results in different ways can add greater meaning and easier consumption of the results, e.g. visual charts to support data science.</p><ul><li>navigate data, especially nested data</li><li>paginate through large data sets without slowing down the tooling</li><li>inspect results of an evaluation and follow updates after each evaluation</li></ul><p>Emacs Cider Inspector is very powerful for paging through large data sets effectively and navigating a complex structure.</p><p>Portal can also navigate data and can show data in a range of views to add more meaning support, e.g. http responses for API development, tables &amp; charts for data science, etc...</p><p>Practicalli configures Portal to listen over nREPL to all Clojure code evaluations, which will work with all of the Clojure editors.</p><h2 id="creating-projects">Creating projects</h2><p>Creating a  a clojure project from templates can save time and provide a consistent base for an organisation.  Extending project templates with options allows for diversity whist still providing common a approach.</p><p>Projects from template are typically created via a shell command, so an editor with shell support is valuable.</p><p><a href="https://practical.li/clojure/clojure-cli/projects/templates/practicalli/">Practicalli Project Templates</a> simplifies Clojure project creation with a growing number of templates, derived from commercial and community experiences.</p><blockquote><p><a href="https://github.com/jpe90/emacs-clj-deps-new">emacs-clj-deps-new package</a> adds project creation to Emacs using clj-new and deps-new projects</p></blockquote><h4 id="debugging-tools">Debugging tools</h4><ul><li>instrument function(s) with break points</li><li>step through functions</li><li>display / inspect local values</li><li>step over calls</li></ul><h4 id="code-manipulation-features">Code manipulation features</h4><ul><li>Vim style editing (a bias of mine, but definitely worth having)</li><li>Structural Editing (smartparents, paredit - manually driven approach)</li><li>Refactor code (rename, add requires, extract to function / let,</li><li>Multi-replacement (e.g. Emacs iedit)
<ul><li>select all matches in scope, jump between matches, toggle matches and simultaneously edit them</li></ul></li><li>Narrowing (e.g Emacs narrowing) - view over part of a file, limiting scope of changes</li><li>Multiple cursors</li></ul><h4 id="unit-testing">Unit Testing</h4><ul><li>Support REPL based test runner (e.g. cider-test)</li><li>Support externally running test runner (e.g. kaocha)</li><li>Enable watch for changes to trigger re-run of tests</li><li>Run all tests / namespace tests / single test / only failing test</li><li>support test selectors to run group of tests</li><li>easy to understand test reports</li></ul><h4 id="code-archaeology-features">Code archaeology features</h4><ul><li>Incoming / outgoing call stack</li><li>Navigate to definition (project, dependency and Java sources where relevant)</li><li>Indicate uses (e.g. number of functions calling a function)</li><li>Indicate unit tests (optional)</li><li>Navigate to errors</li></ul><h4 id="live-collaboration">Live collaboration</h4><ul><li>sharing live code view (Vs code live, floor it's, etc.)
<ul><li>VS Code Live is excellent and significant code changes could be done in a separate editor if vscode/calva unfamiliar</li></ul></li></ul><h4 id="general-features">General features</h4><ul><li>Git client (ideally as rich as Emacs Magit or VS Code edamagit)</li><li>Option to use 100% Keyboard driven interaction (mouse-less operation of tooling)</li><li>vim-style multi-modal editing</li><li>Clojure LSP support (ideally with easily customisable client lsp UI elements)</li></ul><p>Thank you</p><p><a href="https://github.com/practicalli">practicalli GitHub profile</a> I <a href="https://twitter.com/practcial_li">@practical_li</a></p>
</div>

<div id="post-tags">
    <b>Tags: </b>
    
    <a href="/blog-staging/tags/clojure/">clojure</a>
    
    <a href="/blog-staging/tags/editor/">editor</a>
    
</div>


    <div id="prev-next">
        
        
        <a class="right" href="/blog-staging/posts/expose-local-clojure-service-with-ngrok/">Expose Clojure Service using Ngrok &raquo;</a>
        
    </div>

    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_config = function () {
            this.page.url = "http://practical.li/blog-staging/posts/desirable-features-for-a-clojure-editor/";
            this.page.identifier = "Desirable features of a Clojure Editor";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//practicalli-blog.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    


</div>

            </div>
        </div>

        <div class="col-md-3">
            <div id="sidebar">
                <h3>Links</h3>
                <ul id="links">
                    <li><a href="http://practical.li/">Practicalli Home</a></li>
                    <li><a href="http://youtube.com/practicalli">YouTube channel</a></li>
                    <li><a href="https://github.com/practicalli/blog-content/projects/1">Feeback / Issues</a></li>
                    
                    <li><a href="/blog-staging/pages/contributing/">Contributing</a></li>
                    
                </ul>
                
                <div id="recent">
                    <h3>Recent Posts</h3>
                    <ul>
                        
                        <li><a href="/blog-staging/posts/desirable-features-for-a-clojure-editor/">Desirable features of a Clojure Editor</a></li>
                        
                        <li><a href="/blog-staging/posts/expose-local-clojure-service-with-ngrok/">Expose Clojure Service using Ngrok</a></li>
                        
                        <li><a href="/blog-staging/posts/pin-emacs-package-to-manage-issues/">Pin Emacs packages to manage issues</a></li>
                        
                        <li><a href="/blog-staging/posts/access-aws-with-clojure-from-scratch/">Accessing AWS with Clojure from scratch - simple approach</a></li>
                        
                        <li><a href="/blog-staging/posts/docker-a-simple-workflow-for-clojure/">Docker: a simple workflow for Clojure</a></li>
                        
                        <li><a href="/blog-staging/posts/docker-desktop-on-ubuntu-linux/">Docker Desktop on Ubuntu Linux</a></li>
                        
                        <li><a href="/blog-staging/posts/docker-compose-for-clojure-development/">Docker Compose for Clojure Development</a></li>
                        
                        <li><a href="/blog-staging/posts/practicalli-plans-2023/">Practicalli future plans</a></li>
                        
                        <li><a href="/blog-staging/posts/create-deps-new-template-for-clojure-cli-projects/">Create deps-new templates for Clojure CLI projects</a></li>
                        
                    </ul>
                </div>
                
                
                <div id="tags">
                    <h3>Tags</h3>
                    <ul>
                        
                        <li><a href="/blog-staging/tags/json/">json</a></li>
                        
                        <li><a href="/blog-staging/tags/ring/">ring</a></li>
                        
                        <li><a href="/blog-staging/tags/very%20fetch/">very fetch</a></li>
                        
                        <li><a href="/blog-staging/tags/ubuntu/">ubuntu</a></li>
                        
                        <li><a href="/blog-staging/tags/lsp/">lsp</a></li>
                        
                        <li><a href="/blog-staging/tags/cryogen/">cryogen</a></li>
                        
                        <li><a href="/blog-staging/tags/practicalli/">practicalli</a></li>
                        
                        <li><a href="/blog-staging/tags/makefile/">makefile</a></li>
                        
                        <li><a href="/blog-staging/tags/neovim/">neovim</a></li>
                        
                        <li><a href="/blog-staging/tags/aliases/">aliases</a></li>
                        
                        <li><a href="/blog-staging/tags/challenges/">challenges</a></li>
                        
                        <li><a href="/blog-staging/tags/github/">github</a></li>
                        
                        <li><a href="/blog-staging/tags/clojure/">clojure</a></li>
                        
                        <li><a href="/blog-staging/tags/httpkit/">httpkit</a></li>
                        
                        <li><a href="/blog-staging/tags/aws/">aws</a></li>
                        
                        <li><a href="/blog-staging/tags/webapps/">webapps</a></li>
                        
                        <li><a href="/blog-staging/tags/clojure-cli/">clojure-cli</a></li>
                        
                        <li><a href="/blog-staging/tags/pull-requests/">pull-requests</a></li>
                        
                        <li><a href="/blog-staging/tags/editors/">editors</a></li>
                        
                        <li><a href="/blog-staging/tags/java/">java</a></li>
                        
                        <li><a href="/blog-staging/tags/tools-deps/">tools-deps</a></li>
                        
                        <li><a href="/blog-staging/tags/hardware/">hardware</a></li>
                        
                        <li><a href="/blog-staging/tags/make/">make</a></li>
                        
                        <li><a href="/blog-staging/tags/cider/">cider</a></li>
                        
                        <li><a href="/blog-staging/tags/emacs/">emacs</a></li>
                        
                        <li><a href="/blog-staging/tags/clj-http/">clj-http</a></li>
                        
                        <li><a href="/blog-staging/tags/calva/">calva</a></li>
                        
                        <li><a href="/blog-staging/tags/snippets/">snippets</a></li>
                        
                        <li><a href="/blog-staging/tags/clojure-lsp/">clojure-lsp</a></li>
                        
                        <li><a href="/blog-staging/tags/thinkpad/">thinkpad</a></li>
                        
                        <li><a href="/blog-staging/tags/events/">events</a></li>
                        
                        <li><a href="/blog-staging/tags/community/">community</a></li>
                        
                        <li><a href="/blog-staging/tags/advent-of-parens/">advent-of-parens</a></li>
                        
                        <li><a href="/blog-staging/tags/spacemacs/">spacemacs</a></li>
                        
                        <li><a href="/blog-staging/tags/docker/">docker</a></li>
                        
                        <li><a href="/blog-staging/tags/cognitect-labs/">cognitect-labs</a></li>
                        
                        <li><a href="/blog-staging/tags/help/">help</a></li>
                        
                        <li><a href="/blog-staging/tags/transducers/">transducers</a></li>
                        
                        <li><a href="/blog-staging/tags/ngrok/">ngrok</a></li>
                        
                        <li><a href="/blog-staging/tags/lenovo/">lenovo</a></li>
                        
                        <li><a href="/blog-staging/tags/reduce/">reduce</a></li>
                        
                        <li><a href="/blog-staging/tags/compojure/">compojure</a></li>
                        
                        <li><a href="/blog-staging/tags/klipse/">klipse</a></li>
                        
                        <li><a href="/blog-staging/tags/figwheel-main/">figwheel-main</a></li>
                        
                        <li><a href="/blog-staging/tags/clojure-core/">clojure-core</a></li>
                        
                        <li><a href="/blog-staging/tags/web-scraper/">web-scraper</a></li>
                        
                        <li><a href="/blog-staging/tags/blogging/">blogging</a></li>
                        
                        <li><a href="/blog-staging/tags/conjure/">conjure</a></li>
                        
                        <li><a href="/blog-staging/tags/github-actions/">github-actions</a></li>
                        
                        <li><a href="/blog-staging/tags/apis/">apis</a></li>
                        
                        <li><a href="/blog-staging/tags/jvm/">jvm</a></li>
                        
                        <li><a href="/blog-staging/tags/static-sites/">static-sites</a></li>
                        
                        <li><a href="/blog-staging/tags/re-clojure/">re-clojure</a></li>
                        
                        <li><a href="/blog-staging/tags/editor/">editor</a></li>
                        
                        <li><a href="/blog-staging/tags/packages/">packages</a></li>
                        
                    </ul>
                </div>
                
            </div>
        </div>
    </div>
    <footer>
      Copyright &copy; 2023 Practicalli
      <p style="text-align: center;">Powered by <a href="http://cryogenweb.org">Cryogen</a></p>

      <license id="license">
        <div>
          <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution 4.0 ShareAlike License</a>, including custom images & stylesheets.</p>
          <p>Permissions beyond the scope of this license may be available by contacting <a xmlns:cc="http://creativecommons.org/ns#" href="https://twitter.com/practical_li" rel="cc:morePermissions">@practical_li</a></p>
          <br>
          <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>
        </div>
      </license>

    </footer>
</div>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="/blog-staging/js/highlight.pack.js" type="application/javascript"></script>
<script>hljs.initHighlightingOnLoad();</script>


</body>
</html>
