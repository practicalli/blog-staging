<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Practicalli: Clojure CLI tools - aliases and command line flags</title>
    <link rel="canonical" href="http://practical.li/blog-staging/posts/clojure-cli-tools-flags/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu|Ubuntu+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/default.min.css">
    <link href="/blog-staging/css/screen.css" rel="stylesheet" type="text/css" />
</head>
<body>


<nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/blog-staging/">
              <img src="/blog-staging//images/practicalli-logo-name.png" alt="Practicalli logo" />
            </a>
        </div>

        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li ><a href="/blog-staging/">Home</a></li>
                <li
                ><a href="/blog-staging/archives/">Archives</a></li>
                
                <li
                >
                <a href="/blog-staging/pages/about/">About</a>
                </li>
                
                <li><a href="/blog-staging/feed.xml">RSS</a></li>
                <li><a href="https://github.com/practicalli/blog-content/projects/1">Feedback</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div><!--/.container-fluid -->
</nav>


<div class="container">


    <div class="row">
        <div class="col-lg-9">
            <div id="content">
                
<div id="post">
    <div class="post-header">
    <div id="post-meta" class="row">
        <div class="col-lg-6">December 16, 2021</div>
        
    </div>
    <h2>Clojure CLI tools - aliases and command line flags</h2>

    <!-- conditional topic logo displayed if :topic has value in a post -->
    
    <img class="topic" src="/blog-staging/images/clojure-cli-logo-name.png" alt="clojure-cli logo" />
    
</div>
<div>
    
    <p>Clojure CLI tools provide a very flexible way to run Clojure and uses aliases to include community libraries and tools for working with Clojure projects. Understand the command line options (flags) that can be used with aliases ensures an effective use of Clojure CLI tools.</p><p>Clojure CLI tools was <a href="https://clojure.org/releases/tools#v1.10.1.510">first released in February 2020</a> with a specific focus on running Clojure code quickly and easily, which also required the management of dependencies from Maven, Git and a local file space.</p><p>Since that release the design has evolved to provide clojure.exec (<code>-X</code>) to run any Clojure function not just <code>-main</code> as with clojure.main (<code>-M</code>). In July 2021, the ability to run tools (<code>-T</code>) which are independent from the Clojure project classpath was also introduced.</p><p>The command line flags have evolved to enable these features, so lets explore those flags and show how each flag should be used.</p><!-- more --><h2 id="flags-cheatsheet">Flags cheatsheet</h2><ul><li><code>-A</code> - [Deprecated] use <code>-M</code> instead</li><li><code>-M</code> - Call <code>-main</code> function of the given namespace (using <code>-m</code> flag), as defined in the last alias in the chain or on the command line</li><li><code>-X</code> - Call the <code>:exec-fn</code> function from the last alias in chain, passing <code>:exec-args</code> value as arguments</li><li><code>-T</code> - Install tool with alias name, runs tool with tool name (alias name without <code>:</code>)</li><li><code>-P</code> - dry run - downloads dependencies for all aliases but does not execute a function</li></ul><blockquote><p>Aliases can be changed together to merge their configuration, e.g. <code>clojure -M:env/dev:repl/rebel</code> included the configuration from both <code>:env/dev</code> and <code>:repl/rebel</code>.  With the <code>-M</code> flag, only the <code>:main-opts</code> from the last alias in the chain (right-most alias name) is used, unless over-ridden on the command line with the <code>-m</code> flag.</p></blockquote><p>Clojure CLI tools has some built in tools under the special <code>:deps</code> alias (not to be confused with the <code>:deps</code> configuration in a <code>deps.edn</code> file)</p><ul><li><code>-X:deps mvn-install</code> - install a maven jar to the local repository cache</li><li><code>-X:deps git-resolve-tags</code> - Resolve git coord tags to shas and update deps.edn</li><li><code>-X:deps find-versions</code> - Find available versions of a library</li><li><code>-X:deps prep</code> - download libraries in the dependency tree (if not cached)</li></ul><blockquote><p>See <code>clojure --help</code> for other descriptions and examples (or just read this article further)</p></blockquote><h2 id="-m-clojuremain">-M clojure.main</h2><p>Clojure code has historically been run using <code>clojure.main</code> which looks for a <code>-main</code> function in the given namespace.  This is the approach Leiningen has always used.</p><p>Running your Clojure project without any additional aliases on the command line</p><pre><code class="bash">clojure -M -m practicalli/sudoku-solver
</code></pre><p>Running your Clojure project with an alias called <code>:alias/name</code> on the command line will merge any values for <code>:extra-paths</code> and <code>extra-deps</code> into the call, but will ignore any <code>:main-opts</code> as this is over-ridden on the command line using the <code>-m</code> flag.</p><pre><code class="bash">clojure -M:alias/name -m practicalli/sudoku-solver
</code></pre><h2 id="-x-clojureexec">-X clojure.exec</h2><p>Run a function on the commmand line</p><p>Run a function from an alias</p><p>Override default arguments (project/new example)</p><h2 id="-t-tools">-T tools</h2><p>Install a tool</p><p>Run a tool</p><blockquote><p>Installing a tool adds an EDN configuration file in <code>$HOME.clojure/tools/</code> (or $XDG_HOME/.clojure/tools/) directory.  Placing the <code>.clojure</code> directory in version control will reduce the need to install tools, until there is a new version.  It would be great to have antq also update tools aliases to their latest versions as it does with other aliases.</p></blockquote><blockquote><p>NOTE: move to a separate blog post - Clojure CLI tools - understanding the deps.edn configuration file</p></blockquote>
</div>

<div id="post-tags">
    <b>Tags: </b>
    
    <a href="/blog-staging/tags/clojure-cli/">clojure-cli</a>
    
    <a href="/blog-staging/tags/tools-deps/">tools-deps</a>
    
</div>


    <div id="prev-next">
        
        
        <a class="right" href="/blog-staging/posts/clojure-cli-tools-understanding-aliases/">Clojure CLI tools - understanding aliases &raquo;</a>
        
    </div>

    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_config = function () {
            this.page.url = "http://practical.li/blog-staging/posts/clojure-cli-tools-flags/";
            this.page.identifier = "Clojure CLI tools - aliases and command line flags";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//practicalli-blog.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    


</div>

            </div>
        </div>

        <div class="col-md-3">
            <div id="sidebar">
                <h3>Links</h3>
                <ul id="links">
                    <li><a href="http://practical.li/">Practicalli Home</a></li>
                    <li><a href="http://yt.vu/+practicalli">YouTube channel</a></li>
                    <li><a href="https://github.com/practicalli/blog-content/projects/1">Feeback / Issues</a></li>
                    
                    <li><a href="/blog-staging/pages/contributing/">Contributing</a></li>
                    
                </ul>
                
                <div id="recent">
                    <h3>Recent Posts</h3>
                    <ul>
                        
                        <li><a href="/blog-staging/posts/clojure-cli-tools-flags/">Clojure CLI tools - aliases and command line flags</a></li>
                        
                        <li><a href="/blog-staging/posts/clojure-cli-tools-understanding-aliases/">Clojure CLI tools - understanding aliases</a></li>
                        
                        <li><a href="/blog-staging/posts/automate-cryogen-clojure-blog-with-github-actions/">Automate Cryogen Clojure blog with GitHub Actions</a></li>
                        
                        <li><a href="/blog-staging/posts/overview-of-language-server-protocol-lsp-for-clojure-development/">Overview of Language Server Protocol LSP for Clojure development</a></li>
                        
                        <li><a href="/blog-staging/posts/brave-clojure-redux-part01-the-repl/">Brave Clojure redux - part 1 - the REPL</a></li>
                        
                        <li><a href="/blog-staging/posts/clojure-repl-jack-in-or-connect/">Clojure CLI tools - To jack-in or connect, that is the question</a></li>
                        
                        <li><a href="/blog-staging/posts/clojure-cli-aliases-deserve-designing-too/">Clojure CLI tools aliases deserve good design too</a></li>
                        
                        <li><a href="/blog-staging/posts/cloure-community-getting-help/">Clojure community - getting help</a></li>
                        
                        <li><a href="/blog-staging/posts/web-scraping-with-clojure-hacking-hacker-news/">Web Scraping with Clojure - Scraping Hacker News</a></li>
                        
                    </ul>
                </div>
                
                
                <div id="tags">
                    <h3>Tags</h3>
                    <ul>
                        
                        <li><a href="/blog-staging/tags/json/">json</a></li>
                        
                        <li><a href="/blog-staging/tags/ring/">ring</a></li>
                        
                        <li><a href="/blog-staging/tags/very%20fetch/">very fetch</a></li>
                        
                        <li><a href="/blog-staging/tags/ubuntu/">ubuntu</a></li>
                        
                        <li><a href="/blog-staging/tags/lsp/">lsp</a></li>
                        
                        <li><a href="/blog-staging/tags/cryogen/">cryogen</a></li>
                        
                        <li><a href="/blog-staging/tags/aliases/">aliases</a></li>
                        
                        <li><a href="/blog-staging/tags/challenges/">challenges</a></li>
                        
                        <li><a href="/blog-staging/tags/github/">github</a></li>
                        
                        <li><a href="/blog-staging/tags/clojure/">clojure</a></li>
                        
                        <li><a href="/blog-staging/tags/httpkit/">httpkit</a></li>
                        
                        <li><a href="/blog-staging/tags/webapps/">webapps</a></li>
                        
                        <li><a href="/blog-staging/tags/clojure-cli/">clojure-cli</a></li>
                        
                        <li><a href="/blog-staging/tags/pull-requests/">pull-requests</a></li>
                        
                        <li><a href="/blog-staging/tags/editors/">editors</a></li>
                        
                        <li><a href="/blog-staging/tags/tools-deps/">tools-deps</a></li>
                        
                        <li><a href="/blog-staging/tags/hardware/">hardware</a></li>
                        
                        <li><a href="/blog-staging/tags/cider/">cider</a></li>
                        
                        <li><a href="/blog-staging/tags/emacs/">emacs</a></li>
                        
                        <li><a href="/blog-staging/tags/clj-http/">clj-http</a></li>
                        
                        <li><a href="/blog-staging/tags/calva/">calva</a></li>
                        
                        <li><a href="/blog-staging/tags/thinkpad/">thinkpad</a></li>
                        
                        <li><a href="/blog-staging/tags/events/">events</a></li>
                        
                        <li><a href="/blog-staging/tags/community/">community</a></li>
                        
                        <li><a href="/blog-staging/tags/advent-of-parens/">advent-of-parens</a></li>
                        
                        <li><a href="/blog-staging/tags/spacemacs/">spacemacs</a></li>
                        
                        <li><a href="/blog-staging/tags/help/">help</a></li>
                        
                        <li><a href="/blog-staging/tags/lenovo/">lenovo</a></li>
                        
                        <li><a href="/blog-staging/tags/compojure/">compojure</a></li>
                        
                        <li><a href="/blog-staging/tags/klipse/">klipse</a></li>
                        
                        <li><a href="/blog-staging/tags/figwheel-main/">figwheel-main</a></li>
                        
                        <li><a href="/blog-staging/tags/not%20fetch/">not fetch</a></li>
                        
                        <li><a href="/blog-staging/tags/web-scraper/">web-scraper</a></li>
                        
                        <li><a href="/blog-staging/tags/blogging/">blogging</a></li>
                        
                        <li><a href="/blog-staging/tags/conjure/">conjure</a></li>
                        
                        <li><a href="/blog-staging/tags/github-actions/">github-actions</a></li>
                        
                        <li><a href="/blog-staging/tags/apis/">apis</a></li>
                        
                        <li><a href="/blog-staging/tags/static-sites/">static-sites</a></li>
                        
                        <li><a href="/blog-staging/tags/re-clojure/">re-clojure</a></li>
                        
                    </ul>
                </div>
                
            </div>
        </div>
    </div>
    <footer>
      Copyright &copy; 2021 Practicalli
      <p style="text-align: center;">Powered by <a href="http://cryogenweb.org">Cryogen</a></p>

      <license id="license">
        <div>
          <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution 4.0 ShareAlike License</a>, including custom images & stylesheets.</p>
          <p>Permissions beyond the scope of this license may be available by contacting <a xmlns:cc="http://creativecommons.org/ns#" href="https://twitter.com/practical_li" rel="cc:morePermissions">@practical_li</a></p>
          <br>
          <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>
        </div>
      </license>

    </footer>
</div>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="/blog-staging/js/highlight.pack.js" type="application/javascript"></script>
<script>hljs.initHighlightingOnLoad();</script>


</body>
</html>
